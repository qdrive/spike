function showRoute(){var t=window.location.hash;document.querySelector(".address-bar").innerHTML=t}var spike=function(t,e){var n={routes:[],root:"/",contentContainer:"#content-container",loadingTemplate:"<p>Loading...</p>",urlPrefix:"#",notFound:"/not-found",getTemplate:function(t){if(t.template)o.render(n.tp(t.template,t.options)),"function"==typeof t.callback&&t.callback(t.options);else if(t.templateUrl){o.render(n.loadingTemplate);var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status?(t.template=e.responseText,o.render(n.tp(e.responseText,t.options)),"function"==typeof t.callback&&t.callback(t.options)):404==e.status&&o.render("<h1>Error "+e.status+"</h1>")},e.open("GET",t.templateUrl,!0),e.send()}},getFragment:function(){""===e.location.hash&&(e.location.hash=n.urlPrefix+n.root);var t=new RegExp(n.urlPrefix+"(.*)$"),o=e.location.href.match(t);return(o?o[1]:"").toString()},tp:function(t,e){for(var n,o=/<%([^%>]+)?%>/g,a=/(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g,r="var r=[];\n",l=0,i=function(t,e){return r+=e?t.match(a)?t+"\n":"r.push("+t+");\n":""!==t?'r.push("'+t.replace(/"/g,'\\"')+'");\n':"",i};n=o.exec(t);)i(t.slice(l,n.index))(n[1],!0),l=n.index+n[0].length;return i(t.substr(l,t.length-l)),r+='return r.join("");',new Function(r.replace(/[\r\t\n]/g,"")).apply(e)}},o={setRoot:function(t){return n.root=t,o},setContentContainer:function(t){return n.contentContainer=t,o},setNotFound:function(t){return n.notFound=t,o},setLoadingTemplate:function(t){return n.loadingTemplate=t,o},add:function(t){return"object"==typeof t&&t.url&&(t.template||t.templateUrl)?n.routes.push(t):console.log("This route has a problem, it cant be added!",t),o},check:function(t){for(var e,a,r=t||n.getFragment(),l={},i=0;i<n.routes.length;i++){var u=n.routes[i],c=new RegExp("^"+u.url.replace(/(:\w+)/g,"([\\w-]+)")+"$");if(e=r.match(c)){if(e.shift(),a=u.url.match(/(:\w+)/g))for(var s=0;s<a.length;s++)l[a[s].slice(1)]=e[s];return u.options||(u.options={}),u.options.params=l,n.getTemplate(u),o}}return o.navigate(n.notFound),o},listen:function(){var t,e=null;return clearInterval(t),t=setInterval(function(){e!==n.getFragment()&&(e=n.getFragment(),o.check(e))},50),o},render:function(e){return t.querySelector(n.contentContainer).innerHTML=e,o},navigate:function(t){return t=t||"",e.location.href=e.location.href.replace(/#(.*)$/,n.urlPrefix+t),o},hashbang:function(t){return n.urlPrefix=!0===t?"#!":"#",o}};return o}(document,window);spike.setRoot("/").setLoadingTemplate("<h2>Loading...</h2>").setContentContainer("#injected-content").setNotFound("/404").add({url:"/",template:'<div class="gz-container"><h2>Hey,</h2><p><b>I am a template that will be loaded as the defult route!</b></p>',options:{url:"/"},callback:function(t){showRoute()}}).add({url:"/404",template:'<div class="gz-container"><h2>Aye Up,</h2><p><b>I was triggered because a route wasnt found!</b></p>',options:{url:"/404"},callback:function(t){showRoute()}}).add({url:"/items",template:'<div class="gz-container"><h2>Ola,</h2><p><b>I am a plain and simple template!</b></p>',options:{url:"/items"},callback:function(t){showRoute()}}).add({url:"/item/:id",template:'<div class="gz-container"><h2>Howdy,</h2><p><b>I am a template using a parameter!</b></p>',options:{url:"/item/:id"},callback:function(t){showRoute()}}).add({url:"/html",templateUrl:"some-page.html",options:{url:"/html"},callback:function(t){showRoute()}}).listen();